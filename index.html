<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Stream</title>
</head>
<body>
  <h1>Camera đang phát</h1>
  <video id="localVideo" autoplay muted playsinline></video>

  <script src="https://cdn.jsdelivr.net/npm/peerjs@1.5.2/dist/peerjs.min.js"></script>
  <script>
    const peer = new Peer("my-fixed-id");

    peer.on("open", id => {
      console.log("🔴 Đang phát với ID:", id);

      navigator.mediaDevices.getUserMedia({ video: true, audio: false })
        .then(stream => {
          document.getElementById("localVideo").srcObject = stream;

          peer.on("call", call => {
            call.answer(stream);
          });
        })
        .catch(err => {
          alert("❌ Không thể truy cập camera: " + err.message);
        });
    });
  </script>
</body>
</html>
